# ============================================================================
# SpecQ Configuration — ChatGPT Plus (Codex CLI) Only
# ============================================================================
#
# Subscription: ChatGPT Plus (with Codex CLI access)
# Available models: gpt-5.2, gpt-5.3
# CLI tool: codex (https://github.com/openai/codex)
#
# Key: All components use Codex CLI auth — no API key required.
#      Codex CLI doubles as both a coding agent (Executor) and a text
#      generator (Compiler/Voters) via the ACP protocol.
#
# Prerequisites:
#   1. Install Codex CLI: npm install -g @openai/codex
#   2. Authenticate: codex login
#
# Usage:
#   cp docs/config-examples/chatgpt-plus-only.yaml .specq/config.yaml
# ============================================================================

base_branch: main

# ---------------------------------------------------------------------------
# Compiler — Brief generation
# ---------------------------------------------------------------------------
# Uses Codex CLI as a text generator (CodexTextGen) — same CLI auth as the
# executor. A lightweight model compiles proposal + context into a focused
# task brief, just like ClaudeCodeTextGen does for Claude users.
compiler:
  provider: codex
  model: gpt-5.2                    # Fast model for brief compilation
  # Alternatives:
  #   model: gpt-5.3               # Use latest model for better briefs
  #   provider: none                # Skip LLM compilation — passthrough mode

# ---------------------------------------------------------------------------
# Executor — The coding agent that implements each task
# ---------------------------------------------------------------------------
# Uses Codex CLI via ACP (Agent Client Protocol) over stdin/stdout.
# Codex CLI is authenticated via `codex login` (ChatGPT Plus subscription).
executor:
  type: codex
  model: gpt-5.3                    # Latest GPT model for code generation
  max_turns: 50
  # Note: allowed_tools is not passed to Codex CLI — tool access is managed
  # by the CLI itself. The setting here is ignored for codex executor type.
  # Alternatives:
  #   model: gpt-5.2               # Previous generation, faster

# ---------------------------------------------------------------------------
# Verification — Code review voting
# ---------------------------------------------------------------------------
# Use Codex CLI for voting too — different models provide diverse perspectives.
verification:
  voters:
    - provider: codex
      model: gpt-5.3               # Primary reviewer
    - provider: codex
      model: gpt-5.2               # Secondary reviewer — different model
  checks:
    - spec_compliance
    - regression_risk
    - architecture

# If you prefer to skip verification (solo development):
# verification:
#   voters: []

# ---------------------------------------------------------------------------
# Risk Policy
# ---------------------------------------------------------------------------
risk_policy:
  low: skip
  medium:
    strategy: majority
  high:
    strategy: unanimous

# ---------------------------------------------------------------------------
# Budgets
# ---------------------------------------------------------------------------
budgets:
  max_retries: 3
  max_duration_sec: 600
  max_turns: 50
  daily_task_limit: 50

# ---------------------------------------------------------------------------
# Per-Change Overrides (in proposal.md frontmatter)
# ---------------------------------------------------------------------------
# Override model per change:
#
#   ---
#   executor_model: gpt-5.2          # Use older model for simple tasks
#   max_turns: 100
#   ---
#
# Cost optimization strategy:
#   - Simple changes:  gpt-5.2 executor + skip verification
#   - Medium changes:  gpt-5.3 executor + majority vote
#   - Complex changes: gpt-5.3 executor + unanimous vote
